# Database Configuration - Supabase with Environment Variables
# Frontend Update Deploy - January 4, 2026
quarkus.datasource.db-kind=postgresql
quarkus.datasource.username=${SUPABASE_DB_USERNAME:postgres.hlyhuteksgmyovgztfhf}
quarkus.datasource.password=${SUPABASE_DB_PASSWORD:fPGYM6uBDSSXysKJ}
quarkus.datasource.jdbc.url=${SUPABASE_DB_URL:jdbc:postgresql://aws-1-eu-central-1.pooler.supabase.com:5432/postgres?sslmode=require&connect_timeout=30&socket_timeout=60}

# Alternative connection options (commented out)
# Session Pooler: jdbc:postgresql://aws-1-eu-central-1.pooler.supabase.com:5432/postgres?sslmode=require
# Direct connection: jdbc:postgresql://db.hlyhuteksgmyovgztfhf.supabase.co:5432/postgres?sslmode=require

# Database Schema Management
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.show-sql=false
quarkus.hibernate-orm.dialect=org.hibernate.dialect.PostgreSQLDialect

# Connection Pool Settings
quarkus.datasource.jdbc.acquire-timeout=60
quarkus.datasource.jdbc.connection-timeout=60
quarkus.datasource.jdbc.validation-timeout=5
quarkus.datasource.jdbc.leak-detection-interval=60000

# Database Connection Pool Configuration - Optimized for Supabase Transaction Pooler
quarkus.datasource.jdbc.initial-size=2
quarkus.datasource.jdbc.min-size=2
quarkus.datasource.jdbc.max-size=8
quarkus.datasource.jdbc.acquisition-timeout=30s
quarkus.datasource.jdbc.leak-detection-interval=10M
quarkus.datasource.jdbc.idle-removal-interval=5M
quarkus.datasource.jdbc.max-lifetime=30M
quarkus.datasource.jdbc.validation-query-timeout=5s
quarkus.datasource.jdbc.background-validation-interval=30s
quarkus.datasource.jdbc.validate-on-borrow=true
quarkus.datasource.jdbc.new-connection-sql=SELECT 1

# Database Health Check
quarkus.datasource.health.enabled=true

# HTTP Configuration
quarkus.http.host=0.0.0.0
quarkus.http.port=${PORT:8080}
quarkus.http.insecure-requests=enabled

# Security Headers
quarkus.http.header."X-Frame-Options".value=DENY
quarkus.http.header."X-Content-Type-Options".value=nosniff
quarkus.http.header."X-XSS-Protection".value=1; mode=block
quarkus.http.header."Strict-Transport-Security".value=max-age=31536000; includeSubDomains

# CORS Configuration - Fixed to remove warning
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=accept,authorization,content-type,x-requested-with
quarkus.http.cors.exposed-headers=*

# Rate Limiting
quarkus.http.limits.max-body-size=10M
quarkus.http.limits.max-header-size=8K

# Production Logging Configuration
quarkus.log.level=INFO
quarkus.log.console.enable=true
quarkus.log.console.level=INFO
quarkus.log.category."ROOT".level=INFO

# Framework logging - reduce noise
quarkus.log.category."io.vertx".level=WARN
quarkus.log.category."io.netty".level=WARN
quarkus.log.category."io.quarkus".level=WARN
quarkus.log.category."org.jboss".level=WARN

# Database logging - enable for debugging
quarkus.log.category."org.hibernate".level=INFO
quarkus.log.category."org.hibernate.SQL".level=DEBUG
quarkus.log.category."io.agroal".level=INFO
quarkus.log.category."org.postgresql".level=INFO

# Application logging
quarkus.log.category."elonmusk".level=DEBUG

# Security logging
quarkus.log.category."elonmusk.service.SecurityService".level=INFO
quarkus.log.category."elonmusk.service.AuthService".level=INFO
quarkus.log.category."elonmusk.controller.AdminController".level=DEBUG

# Health Check Configuration
quarkus.smallrye-health.root-path=/health
quarkus.smallrye-health.ui.enable=true

# Metrics Configuration (Disabled for production)
quarkus.micrometer.enabled=false
quarkus.micrometer.export.prometheus.enabled=false

# Disable development features
quarkus.live-reload.instrumentation=false
