<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sign Up</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: Arial, sans-serif; background: linear-gradient(to right, #3d82e9, #60b966); min-height: 100vh; display: flex; flex-direction: column; align-items: center; }
        .header { color: white; padding: 1.5rem; text-align: center; width: 100%; background-color: #5f5fbc; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); }
        .main-container { padding: 2rem; display: flex; flex-direction: column; align-items: center; width: 100%; max-width: 700px; }
        .form-container { background-color: #5858c1; padding: 20px; margin-top: 20px; color: #efedf5; border-radius: 10px; box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); width: 100%; }
        .form-group { margin-bottom: 1.2rem; width: 100%; }
        .form-group label { display: block; font-weight: bold; margin-bottom: 0.5rem; color: white; }
        .form-group input { width: 100%; padding: 0.8rem; border: 1px solid #ddd; border-radius: 8px; background-color: #333386; color: white; }
        .form-group input::placeholder { color: rgba(255, 255, 255, 0.7); }
        .sign-up-button { width: 100%; padding: 0.8rem; background-color: #333394; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .sign-up-button:hover { background-color: #242163; }
        .error-text { color: #ff6b6b; font-size: 0.8rem; margin-top: 0.3rem; display: none; }
        .error { border-color: #ff6b6b !important; }
        .input-with-icon { position: relative; display: flex; align-items: center; }
        .input-with-icon svg { position: absolute; left: 12px; width: 16px; height: 16px; fill: rgba(255, 255, 255, 0.7); }
        .input-with-icon input { padding-left: 40px !important; }
        .toggle-password { position: absolute; right: 10px; background: none; border: none; color: rgba(255, 255, 255, 0.7); cursor: pointer; padding: 0; }
        .toggle-password svg { width: 16px; height: 16px; fill: rgba(255, 255, 255, 0.7); }
        .hint { font-size: 0.75rem; color: rgba(255, 255, 255, 0.6); margin-top: 0.3rem; }
        .toggle-link { display: block; text-align: center; color: #d4b344; text-decoration: none; margin-top: 1rem; }
        .error-message, .success-message { font-size: 0.8rem; margin-bottom: 1rem; text-align: center; }
        .error-message { color: #e74c3c; }
        .success-message { color: #8edca0; }
        .login-link { text-align: center; margin-top: 1.5rem; color: rgba(255, 255, 255, 0.8); }
        .login-link a { color: #d4b344; text-decoration: none; font-weight: bold; }
        .login-link a:hover { text-decoration: underline; }
        .lang-toggle { position: fixed; top: 20px; right: 20px; background-color: #ff6b35; color: white; border: none; padding: 8px 12px; border-radius: 20px; cursor: pointer; font-size: 12px; z-index: 1000; }
        @media screen and (max-width: 412px) { body { padding: 0.5rem; } .header { padding: 1rem; } .header h1 { font-size: 1.5rem; } .header p { font-size: 0.9rem; } .main-container { padding: 1rem; } .form-container { padding: 15px; margin-top: 10px; } .form-group { margin-bottom: 1rem; } .form-group input { padding: 0.7rem; font-size: 16px; } .form-group label { font-size: 0.9rem; } .sign-up-button { padding: 0.9rem; font-size: 1rem; } .toggle-link { font-size: 0.9rem; margin-top: 0.8rem; } }
        @media screen and (max-width: 360px) { .header { padding: 0.8rem; } .header h1 { font-size: 1.3rem; } .main-container { padding: 0.8rem; } .form-container { padding: 12px; } }
    </style>
</head>
<body>
    <button id="langToggle" class="lang-toggle" onclick="switchLanguage()">EN</button>
    <div id="signup-page">
        <header class="header">
            <h1>
                <span id="signupTitle-en">Sign Up</span>
                <span id="signupTitle-am" style="display:none">ይመዝገቡ</span>
                <span id="signupTitle-zh" style="display:none">注册</span>
                <span id="signupTitle-es" style="display:none">Registrarse</span>
            </h1>
            <p>
                <span id="createAccount-en">Create an Account</span>
                <span id="createAccount-am" style="display:none">መለያ ይፍጠሩ</span>
                <span id="createAccount-zh" style="display:none">创建账户</span>
                <span id="createAccount-es" style="display:none">Crear una Cuenta</span>
            </p>
        </header>
        <div class="main-container">
            <div class="form-container">
                <form id="signup-form" method="post" novalidate>
                    <div id="error-container">
                        {#if error}
                            <div class="error-message">{error}</div>
                        {/if}
                        {#if success}
                            <div class="success-message">{success}</div>
                        {/if}
                    </div>
                    
                    <div class="form-group">
                        <label for="name">
                            <span id="fullName-en">Full Name</span>
                            <span id="fullName-am" style="display:none">ሙሉ ስም</span>
                            <span id="fullName-zh" style="display:none">全名</span>
                            <span id="fullName-es" style="display:none">Nombre Completo</span>
                        </label>
                        <div class="input-with-icon">
                            <svg viewBox="0 0 16 16"><path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/></svg>
                            <input type="text" 
                                   id="name" 
                                   name="name" 
                                   placeholder="Enter your full name"
                                   autocomplete="name"

                                   required>
                        </div>
                        <div class="hint">
                            <span id="nameHint-en">At least 2 characters</span>
                            <span id="nameHint-am" style="display:none">ቢያንስ 2 ቁምፊዎች</span>
                            <span id="nameHint-zh" style="display:none">至少2个字符</span>
                            <span id="nameHint-es" style="display:none">Al menos 2 caracteres</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="account">
                            <span id="phoneNumber-en">Phone Number</span>
                            <span id="phoneNumber-am" style="display:none">ስልክ ቁጥር</span>
                            <span id="phoneNumber-zh" style="display:none">电话号码</span>
                            <span id="phoneNumber-es" style="display:none">Número de Teléfono</span>
                        </label>
                        <div class="input-with-icon">
                            <svg viewBox="0 0 16 16"><path d="M1.885.511a1.745 1.745 0 0 1 2.61.163L6.29 2.98c.329.423.445.974.315 1.494l-.547 2.19a.678.678 0 0 0 .178.643l2.457 2.457a.678.678 0 0 0 .644.178l2.189-.547a1.745 1.745 0 0 1 1.494.315l2.306 1.794c.829.645.905 1.87.163 2.611l-1.034 1.034c-.74.74-1.846 1.065-2.877.702a18.634 18.634 0 0 1-7.01-4.42 18.634 18.634 0 0 1-4.42-7.009c-.362-1.03-.037-2.137.703-2.877L1.885.511z"/></svg>
                            <input type="text" 
                                   id="account" 
                                   name="account" 
                                   value="0"
                                   placeholder="0912345678 or 0787654321"
                                   autocomplete="tel"
                                   inputmode="numeric"
                                   pattern="0[97][0-9]{8}"
                                   title="Please enter a valid Ethiopian phone number (09 or 07 followed by 8 digits)"
                                   required>
                        </div>
                        <div class="hint">
                            <span id="phoneHint-en">Start with 09 or 07, then add 8 more digits</span>
                            <span id="phoneHint-am" style="display:none">በ09 ወይም 07 ይጀምሩ፣ ከዚያ 8 ተጨማሪ ቁጥሮች ይጨምሩ</span>
                            <span id="phoneHint-zh" style="display:none">以09或07开头，然后添加8位数字</span>
                            <span id="phoneHint-es" style="display:none">Comience con 09 o 07, luego agregue 8 dígitos más</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">
                            <span id="emailAddress-en">Email Address</span>
                            <span id="emailAddress-am" style="display:none">ኢሜይል አድራሻ</span>
                            <span id="emailAddress-zh" style="display:none">电子邮件地址</span>
                            <span id="emailAddress-es" style="display:none">Dirección de Correo</span>
                        </label>
                        <div class="input-with-icon">
                            <svg viewBox="0 0 16 16"><path d="M2 2A2 2 0 0 0 .05 3.555L8 8.414l7.95-4.859A2 2 0 0 0 14 2H2Zm-2 9.8V4.698l5.803 3.546L0 11.801Zm6.761-2.97-6.57 4.026A2 2 0 0 0 2 14h6.256A4.493 4.493 0 0 1 8 12.5a4.49 4.49 0 0 1 1.606-3.446l-.367-.225L8.761 8.83ZM16 4.697v4.312a4.493 4.493 0 0 0-1.98-.814V8.414l-1.17-.716A4.49 4.49 0 0 0 10.5 8c-.424 0-.834.067-1.224.192l-.014.009L16 4.697Z"/></svg>
                            <input type="email" 
                                   id="email" 
                                   name="email" 
                                   placeholder="Enter your email"
                                   autocomplete="email"
                                   required>
                        </div>
                        <div class="hint">
                            <span id="emailHint-en">We'll send a verification email</span>
                            <span id="emailHint-am" style="display:none">የማረጋገጫ ኢሜይል እንልክልዎታለን</span>
                            <span id="emailHint-zh" style="display:none">我们将发送验证邮件</span>
                            <span id="emailHint-es" style="display:none">Enviaremos un correo de verificación</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="password">
                            <span id="password-en">Password</span>
                            <span id="password-am" style="display:none">የይለፍ ቃል</span>
                            <span id="password-zh" style="display:none">密码</span>
                            <span id="password-es" style="display:none">Contraseña</span>
                        </label>
                        <div class="input-with-icon">
                            <svg viewBox="0 0 16 16"><path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/></svg>
                            <input type="password" 
                                   id="password" 
                                   name="password" 
                                   placeholder="Create a strong password"
                                   autocomplete="new-password"
                                   maxlength="6"
                                   minlength="6"
                                   required>
                            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
                                <svg viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/></svg>
                            </button>
                        </div>
                        <div class="hint">
                            <span id="passwordHint-en">Enter any 6 characters (numbers, letters, symbols)</span>
                            <span id="passwordHint-am" style="display:none">ማንኛውም 6 ቁምፊዎች ያስገቡ (ቁጥሮች፣ ፊደላት፣ ምልክቶች)</span>
                            <span id="passwordHint-zh" style="display:none">输入任意6个字符（数字、字母、符号）</span>
                            <span id="passwordHint-es" style="display:none">Ingrese cualquier 6 caracteres (números, letras, símbolos)</span>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="passwordRepeat">
                            <span id="confirmPassword-en">Confirm Password</span>
                            <span id="confirmPassword-am" style="display:none">የይለፍ ቃል ያረጋግጡ</span>
                            <span id="confirmPassword-zh" style="display:none">确认密码</span>
                            <span id="confirmPassword-es" style="display:none">Confirmar Contraseña</span>
                        </label>
                        <div class="input-with-icon">
                            <svg viewBox="0 0 16 16"><path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/></svg>
                            <input type="password" 
                                   id="passwordRepeat" 
                                   name="passwordRepeat" 
                                   placeholder="Confirm your password"
                                   autocomplete="new-password"
                                   maxlength="6"
                                   minlength="6"
                                   required>
                            <button type="button" class="toggle-password" aria-label="Toggle password visibility">
                                <svg viewBox="0 0 16 16"><path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/><path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/></svg>
                            </button>
                        </div>
                    </div>

                    {#if referralCode}
                        <!-- Hidden field for URL-based referral code only -->
                        <input type="hidden" name="referralCode" value="{referralCode}">
                        <div style="background-color: #4CAF50; color: white; padding: 10px; border-radius: 5px; margin-bottom: 15px; text-align: center;">
                            <svg style="width: 16px; height: 16px; fill: white; margin-right: 8px;" viewBox="0 0 16 16"><path d="M3 2.5a2.5 2.5 0 0 1 5 0 2.5 2.5 0 0 1 5 0v.006c0 .07 0 .27-.038.494H15a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1v7.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 1 14.5V7a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2.038A2.968 2.968 0 0 1 3 2.506V2.5zm1.068.5H7a1.5 1.5 0 0 1 1.5 1.5v.5H6V4a2.5 2.5 0 0 0-1.932-2.44zM9 4.5V6h2.5V4.5A1.5 1.5 0 0 0 10 3H8.068A2.44 2.44 0 0 1 9 4.5zM6 4.5A1.5 1.5 0 0 0 4.5 3H2.068A2.44 2.44 0 0 1 3 4.5V6h3V4.5z"/></svg> 
                            <span id="invitedMsg-en">You're invited! Referral code: {referralCode}</span>
                            <span id="invitedMsg-am" style="display:none">ተጋብዘዋል! የግብዣ ኮድ: {referralCode}</span>
                            <span id="invitedMsg-zh" style="display:none">您被邀请了！推荐码：{referralCode}</span>
                            <span id="invitedMsg-es" style="display:none">¡Estás invitado! Código de referencia: {referralCode}</span>
                        </div>
                    {/if}
                    
                    <!-- Hidden field to track user's language preference -->
                    <input type="hidden" name="language" id="languageField" value="en">
                    
                    <button type="submit" class="sign-up-button">
                        <span id="signupBtn-en">Sign Up</span>
                        <span id="signupBtn-am" style="display:none">ይመዝገቡ</span>
                        <span id="signupBtn-zh" style="display:none">注册</span>
                        <span id="signupBtn-es" style="display:none">Registrarse</span>
                    </button>
                </form>
                <div class="login-link">
                    <span id="haveAccount-en">Already have an account?</span>
                    <span id="haveAccount-am" style="display:none">ቀደም ሲል መለያ አለዎት?</span>
                    <span id="haveAccount-zh" style="display:none">已有账户？</span>
                    <span id="haveAccount-es" style="display:none">¿Ya tienes una cuenta?</span>
                    <a href="/login">
                        <span id="navLogin-en">Login</span>
                        <span id="navLogin-am" style="display:none">ግባ</span>
                        <span id="navLogin-zh" style="display:none">登录</span>
                        <span id="navLogin-es" style="display:none">Iniciar Sesión</span>
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <script src="/js/lang.js"></script>
    <script>
        // Update language field when user switches language
        function updateLanguageField() {
            const currentLang = getCurrentLanguage(); // Assuming this function exists in lang.js
            const languageField = document.getElementById('languageField');
            if (languageField) {
                languageField.value = currentLang;
            }
        }
        
        // Override the switchLanguage function to also update the hidden field
        const originalSwitchLanguage = window.switchLanguage;
        window.switchLanguage = function() {
            if (originalSwitchLanguage) {
                originalSwitchLanguage();
            }
            updateLanguageField();
        };
        
        // Set initial language
        document.addEventListener('DOMContentLoaded', function() {
            updateLanguageField();
        });
    </script>
</body>
</html>